<!DOCTYPE html>
<html>

<head>
    <meta charset="ISO-8859-1">
    <title>Insert title here</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>

<body>

    <div class="container">

        <h1>Flixbus</h1>

        <button id="btnAll" type="button" class="w-100 btn btn-lg btn-outline-primary">Vedi Tutte Le Tratte</button>
        <div id="output"></div>

        <main>
            <div class="row row-cols-1 row-cols-md-3 mb-3 text-center">
                <div class="col">
                    <div class="card mb-4 rounded-3 shadow-sm">
                        <div class="card-header py-3">
                            <h4 class="my-0 fw-normal">Free</h4>
                        </div>
                        <div class="card-body">
                            <h1 class="card-title pricing-card-title">$0<small class="text-muted fw-light">/mo</small>
                            </h1>
                            <ul class="list-unstyled mt-3 mb-4">
                                <li>10 users included</li>
                                <li>2 GB of storage</li>
                                <li>Email support</li>
                                <li>Help center access</li>
                            </ul>
                            <button type="button" class="w-100 btn btn-lg btn-outline-primary">Sign up for free</button>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card mb-4 rounded-3 shadow-sm">
                        <div class="card-header py-3">
                            <h4 class="my-0 fw-normal">Pro</h4>
                        </div>
                        <div class="card-body">
                            <h1 class="card-title pricing-card-title">$15<small class="text-muted fw-light">/mo</small>
                            </h1>
                            <ul class="list-unstyled mt-3 mb-4">
                                <li>20 users included</li>
                                <li>10 GB of storage</li>
                                <li>Priority email support</li>
                                <li>Help center access</li>
                            </ul>
                            <button type="button" class="w-100 btn btn-lg btn-primary">Get started</button>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card mb-4 rounded-3 shadow-sm border-primary">
                        <div class="card-header py-3 text-bg-primary border-primary">
                            <h4 class="my-0 fw-normal">Enterprise</h4>
                        </div>
                        <div class="card-body">
                            <h1 class="card-title pricing-card-title">$29<small class="text-muted fw-light">/mo</small>
                            </h1>
                            <ul class="list-unstyled mt-3 mb-4">
                                <li>30 users included</li>
                                <li>15 GB of storage</li>
                                <li>Phone and email support</li>
                                <li>Help center access</li>
                            </ul>
                            <button type="button" class="w-100 btn btn-lg btn-primary">Contact us</button>
                        </div>
                    </div>
                </div>
            </div>

            <h2 class="display-6 text-center mb-4">Compare plans</h2>

            <div class="table-responsive">
                <table class="table text-center">
                    <thead>
                        <tr>
                            <th style="width: 34%;"></th>
                            <th style="width: 22%;">Free</th>
                            <th style="width: 22%;">Pro</th>
                            <th style="width: 22%;">Enterprise</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row" class="text-start">Public</th>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                        </tr>
                        <tr>
                            <th scope="row" class="text-start">Private</th>
                            <td></td>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                        </tr>
                    </tbody>

                    <tbody>
                        <tr>
                            <th scope="row" class="text-start">Permissions</th>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                        </tr>
                        <tr>
                            <th scope="row" class="text-start">Sharing</th>
                            <td></td>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                        </tr>
                        <tr>
                            <th scope="row" class="text-start">Unlimited members</th>
                            <td></td>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                        </tr>
                        <tr>
                            <th scope="row" class="text-start">Extra security</th>
                            <td></td>
                            <td></td>
                            <td><svg class="bi" width="24" height="24">
                                    <use xlink:href="#check" /></svg></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous">
    </script>
    <script>
        const btnAll = document.getElementById("btnAll");
        const output = document.getElementById("output");
        const URL = "http://localhost:9001/api/tratta";
        const URL_Viaggi = "http://localhost:9001/api/viaggio";

        btnAll.addEventListener("click", function () {
            console.log("Funziona");

            fetch(URL).then(json => json.json()).then(js => {

                const ul = document.createElement("ul");
                ul.setAttribute("class", "list-group");

                for (const tratta of js) {

                    const li = document.createElement("li");
                    li.textContent = tratta.descrizione;
                    li.addEventListener("click", function () {
                        showInfo(tratta.id);
                    });
                    li.setAttribute("class", "list-group-item");
                    ul.appendChild(li);
                    console.log(tratta);
                }
                output.appendChild(ul);
            })

        }) //fine btnAll

        function showInfo(idViaggio) {
            console.log(idViaggio);

            let viaggio = {
                idViaggi: null,
                dataViaggio: "2022-07-25",
                numeroBiglietti: 10,
                tratta: {
                    descrizione: "Torino-Roma",
                    id: idViaggio
                },
                utente: {
                    denominazione: "chivapiano",
                    id: 1
                }
            };

            fetch(URL_Viaggi, {
                    method: 'POST', // or 'PUT'
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(viaggio),
                })
                .then((response) => {
                    // console.log(response.text());
                   return response.json()})
                .then((data) => {
                    console.log('Success:', data);
                })
                .catch((error) => {
                    console.error('Error:', error);
                })

        }
    </script>

</body>

</html>